*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,#0f2027 0,#203a43 50%,#2c5364 100%);min-height:100vh;padding:20px}.container{max-width:600px;margin:0 auto}h1{color:#e8f5e9;text-align:center;margin-bottom:35px;font-size:32px;font-weight:600;text-shadow:0 2px 8px rgba(0,0,0,.4);letter-spacing:-.5px}.card{background:#37474f;border:1px solid #546e7a;border-radius:14px;padding:24px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.3)}.card:hover{box-shadow:0 8px 20px rgba(0,0,0,.4)}.relay-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}.status-group{display:flex;align-items:center;gap:8px}.relay-name{font-size:20px;font-weight:600;color:#eceff1;letter-spacing:-.3px}.status{display:inline-flex;align-items:center;padding:6px 12px;border-radius:20px;font-size:11px;font-weight:700;letter-spacing:.8px;transition:.3s;text-transform:uppercase;gap:6px}.status-icon{flex-shrink:0;margin-top:-1px}.status::before{content:'';width:7px;height:7px;border-radius:50%;margin-right:7px}.status.on{background:#2e7d32;color:#a5d6a7;border:1px solid #43a047}.status.on::before{background:#66bb6a;box-shadow:0 0 8px #66bb6a;animation:2s infinite pulse}.status.off{background:#455a64;color:#b0bec5;border:1px solid #607d8b}.status.off::before{background:#78909c}.btn-group{display:flex;gap:12px}button{flex:1;padding:14px 20px;border:2px solid transparent;border-radius:10px;font-size:14px;font-weight:700;cursor:pointer;transition:.2s;text-transform:uppercase;letter-spacing:.8px;position:relative;display:flex;align-items:center;justify-content:center}button:disabled{opacity:.5;cursor:not-allowed}button:active:not(:disabled){transform:scale(.96)}.btn-on{background:#388e3c;color:#e8f5e9;box-shadow:0 3px 8px rgba(56,142,60,.4)}.btn-on:hover:not(:disabled){background:#43a047;box-shadow:0 5px 15px rgba(67,160,71,.5);transform:translateY(-2px)}.btn-off{background:#e53935;color:#ffebee;box-shadow:0 3px 8px rgba(229,57,53,.4)}.btn-off:hover:not(:disabled){background:#ef5350;box-shadow:0 5px 15px rgba(239,83,80,.5);transform:translateY(-2px)}.btn-small{padding:6px 12px;font-size:11px;border-radius:6px;flex:none}.btn-icon{flex:none;width:32px;height:32px;padding:0;font-size:18px;background:#455a64;color:#eceff1}.btn-icon:hover:not(:disabled){background:#546e7a}.btn-timer-trigger{background:#0288d1;color:#e1f5fe;flex:0 0 42px;height:29px;padding:0;border-radius:80px;border:1px solid #0277bd}.btn-timer-trigger:hover:not(:disabled){background:#039be5;box-shadow:0 5px 15px rgba(3,155,229,.5);transform:translateY(-2px)}.nav{display:flex;justify-content:flex-start;margin-bottom:20px}.nav-link{color:#81d4fa;text-decoration:none;font-size:14px;font-weight:600}.nav-link:hover{text-decoration:underline;transform:scale(1.15);transition:.3s}.routine-selector{display:flex;gap:12px;margin-bottom:20px}#routine-list{flex:1;background:#263238;color:#eceff1;border:1px solid #546e7a;border-radius:10px;padding:10px;outline:0}.routine-actions{display:flex;gap:8px}.routine-name-input{background:0 0;border:none;border-bottom:1px solid #546e7a;color:#eceff1;font-size:20px;font-weight:600;padding:4px;flex:1;margin-right:15px;outline:0}.routine-name-input:focus{border-bottom-color:#81d4fa}.routine-step-card{background:#37474f;border:1px solid #546e7a;border-radius:14px;padding:20px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,.3);display:flex;justify-content:space-between;align-items:center;transition:transform .3s,opacity .3s,box-shadow .3s;animation:.3s ease-out slideIn}.routine-step-card.moving{z-index:10;box-shadow:0 8px 20px rgba(0,0,0,.5)}@keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.step-info{display:flex;flex-direction:column;gap:8px}.step-name{font-size:18px;font-weight:600;color:#eceff1}.step-controls{display:flex;align-items:center;gap:8px;font-size:14px;color:#b0bec5}.step-controls input{width:45px;background:0 0;border:none;color:#eceff1;padding:8px 0;text-align:center;font-weight:600;font-size:16px;-moz-appearance:textfield}.step-controls input::-webkit-inner-spin-button,.step-controls input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.btn-step-adjust{background:#455a64;border:1px solid #546e7a;color:#eceff1;width:28px;height:28px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;font-size:18px;font-weight:700;flex:none;transition:2s}.btn-step-adjust:hover{background:#546e7a}.step-actions{display:flex;gap:10px}.btn-add-step{position:sticky;bottom:20px;left:50%;transform:translateX(-50%);width:56px;height:56px;border-radius:28px;background:#2e7d32;color:#fff;font-size:24px;box-shadow:0 4px 15px rgba(0,0,0,.4);z-index:100;margin:20px auto}.btn-add-step:hover{background:#388e3c;transform:translateX(-50%) translateY(-2px)}.btn-remove-step{background:#c62828;color:#fff;width:32px;height:32px;padding:0;border-radius:8px;display:flex;align-items:center;justify-content:center;flex:none}.station-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:15px}.station-option{background:#455a64;padding:15px;border-radius:10px;text-align:center;cursor:pointer;font-weight:600;color:#eceff1;transition:background .2s}.station-option:hover{background:#546e7a}.routines-container{margin-top:20px;border-top:1px solid #546e7a;padding-top:20px}.routine-pill{background:#0288d1;color:#fff;padding:12px 20px;border-radius:14px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.2);transition:.2s;gap:15px}.routine-pill:hover{transform:scale(1.02);background:#039be5}.routine-pill.active{background:#2e7d32;animation:2s infinite pulse;cursor:default}.routine-pill-content{display:flex;flex-direction:column;flex:1}.routine-pill-name{font-weight:600}.routine-pill-status{font-size:12px;font-weight:700;text-transform:uppercase}.routine-progress{display:flex;flex-direction:column;gap:5px}.step-active{font-size:13px;font-weight:600;color:#e1f5fe}.step-list-mini{display:flex;gap:4px}.step-dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.2)}.step-dot.done{background:#81c784}.step-dot.busy{background:#ffeb3b;box-shadow:0 0 5px #ffeb3b}.step-dot.todo{background:rgba(255,255,255,.4)}.btn-skip-routine,.btn-stop-routine{background:#e53935;color:#fff;border:none;padding:6px 12px;border-radius:10px;font-size:11px;font-weight:700;cursor:pointer;text-transform:uppercase;transition:.2s;flex:none;box-shadow:0 2px 5px rgba(0,0,0,.3);display:flex;align-items:center;height:28px}.btn-skip-routine{background:#f57c00;margin-right:4px}.btn-stop-routine:hover{background:#f44336;transform:scale(1.05)}.btn-skip-routine:hover{background:#ff9800;transform:scale(1.05)}.routine-pill-actions{display:flex;align-items:center}#toast-container{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:9999}.toast{background:#323232;color:#fff;padding:12px 24px;border-radius:8px;margin-top:10px;box-shadow:0 4px 12px rgba(0,0,0,.4);font-size:14px;font-weight:600;min-width:200px;text-align:center;animation:.3s ease-out slideUp;transition:opacity .5s,transform .5s;border-left:4px solid #546e7a}.toast.error{border-left-color:#e53935;background:#4a1c1c}.toast.success{border-left-color:#2e7d32;background:#1c3a1c}.toast.fade-out{opacity:0;transform:translateY(20px)}@keyframes slideUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(4px)}.modal{background:#37474f;border:1px solid #546e7a;border-radius:16px;padding:24px;width:90%;max-width:400px;box-shadow:0 10px 25px rgba(0,0,0,.5);text-align:center;position:relative}.modal h3{color:#eceff1;margin-bottom:10px;font-size:18px}.modal-remaining{font-size:14px;color:#81d4fa;margin-bottom:15px;font-weight:600;min-height:20px}.modal input{width:100%;background:#263238;border:1px solid #546e7a;border-radius:10px;padding:12px;color:#eceff1;font-size:18px;text-align:center;margin-bottom:20px;outline:0}.modal-btns{display:flex;gap:12px}.btn-timed{background:#0288d1;color:#e1f5fe}.btn-cancel{background:#546e7a;color:#eceff1}.loading{pointer-events:none;opacity:.7}.loading::after{content:'';position:absolute;right:12px;top:50%;width:14px;height:14px;margin-top:-7px;border:2px solid currentColor;border-right-color:transparent;border-radius:50%;animation:.7s linear infinite spinner}@keyframes spinner{to{transform:rotate(360deg)}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@media (max-width:480px){body{padding:12px}h1{font-size:24px;margin-bottom:20px}.card{padding:16px;margin-bottom:12px}.relay-name{font-size:16px}.routine-name-input{font-size:18px;margin-right:8px}.routine-step-card{padding:12px;margin-bottom:8px;flex-direction:row;flex-wrap:nowrap;gap:8px}.step-info{gap:4px;flex:1;min-width:0}.step-name{font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.step-controls{gap:4px;font-size:12px}.step-controls input{width:35px;font-size:14px;padding:4px 0}.btn-step-adjust{width:24px;height:24px;font-size:16px}.step-actions{gap:6px}.btn-icon,.btn-remove-step{width:28px;height:28px}.btn-icon svg,.btn-remove-step svg{width:14px;height:14px}button{font-size:12px;padding:10px 14px}.btn-small{padding:6px 10px;font-size:10px}.routine-pill{padding:10px 16px}.routine-pill-name{font-size:14px}.routine-pill-status{font-size:10px}.status-group{gap:6px}.btn-timer-trigger{flex:0 0 36px;height:26px}.status{padding:4px 8px;font-size:10px}}